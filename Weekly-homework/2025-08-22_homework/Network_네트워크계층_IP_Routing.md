# 네트워크 주소와 라우팅 정리

---

## IP (Internet Protocol)

* **정의**: 네트워크 상에서 **각 기기를 식별하기 위한 주소 체계**
* **특징**: 계층적 구조 (네트워크 ID + 호스트 ID)
* **버전**:

  * **IPv4**: 32비트 주소, 약 43억 개 → 주소 부족 문제 발생
  * **IPv6**: 128비트 주소, 사실상 무한대 → 주소 부족 해결책

---

## 공인 IP 주소 (Public IP)

* ISP(인터넷 서비스 제공자)로부터 할당받은 전 세계에서 **유일하게 식별 가능한 주소**
* 외부 인터넷(네이버, 구글 등)에서 보이는 주소
* 예: `203.0.113.5`

## 사설 IP 주소 (Private IP)

* 내부 네트워크(집, 회사, 군대 등)에서만 사용되는 주소
* 외부 인터넷에서는 직접 사용 불가 (NAT 필요)
* 범위:

  * `10.0.0.0 ~ 10.255.255.255`
  * `172.16.0.0 ~ 172.31.255.255`
  * `192.168.0.0 ~ 192.168.255.255`

---

## NAT (Network Address Translation)

* **정의**: 사설 IP ↔ 공인 IP 변환 기술
* **목적**:

  * IP 주소 부족 문제 해결
  * 내부 네트워크 보안 강화 (내부 IP 숨김)
* **종류**:

  * **SNAT**: 출발지 IP 변환 (내부 → 외부)
  * **DNAT**: 목적지 IP 변환 (외부 → 내부)
  * **PAT (NAPT)**: 포트 번호까지 변환 → 다수의 내부 호스트가 하나의 공인 IP 공유 가능

---

## 공유기 (Router)

* **정의**: 여러 네트워크를 연결하고, 패킷을 올바른 경로로 전달하는 장비
* **기능**:

  * NAT 수행
  * DHCP 서버 역할 (내부 IP 자동 할당)
  * 라우팅 (경로 선택)

---

## 정적 IP (Static IP)

* 관리자가 수동으로 설정하는 고정된 IP 주소
* 서버, 네트워크 장비 등 외부에서 접근해야 하는 경우 사용

## 동적 IP (Dynamic IP)

* 네트워크에 접속할 때마다 자동으로 할당되는 IP 주소
* 일반 사용자 PC, 스마트폰 등에서 주로 사용

## DHCP (Dynamic Host Configuration Protocol)

* 네트워크에 접속하는 기기에 **IP, 서브넷 마스크, 게이트웨이, DNS** 등을 자동으로 할당하는 프로토콜

---

## 라우팅 (Routing)

* **정의**: 목적지 IP에 도달하기 위해 **최적 경로를 선택하는 과정**
* **담당 장비**: 라우터

## 디폴트 게이트웨이 (Default Gateway)

* 내부 네트워크에서 외부 네트워크로 나갈 때 거치는 **출구 역할의 라우터 주소**

---

## 라우팅 테이블 (Routing Table)

라우터가 패킷 전달을 결정하기 위해 참고하는 경로 정보의 집합.

### 주요 항목

* **목적지 (Destination)**: 도착할 네트워크 주소
* **서브넷 마스크 (Subnet Mask)**: 목적지 네트워크 범위 구분
* **게이트웨이 (Gateway/Next Hop)**: 다음으로 보낼 라우터 주소
* **인터페이스 (Interface)**: 패킷이 나갈 실제 장비 포트/네트워크 카드
* **메트릭 (Metric)**: 경로의 우선순위(숫자가 낮을수록 우선)

---

## 라우팅 선택 원리

* **Longest Prefix Match (최장 접두사 일치)**

  * 목적지 IP가 여러 경로와 일치할 수 있음 → 가장 구체적인 경로(prefix 길이가 가장 긴 것)를 선택
* **Default Route (디폴트 라우트)**

  * 어떤 경로에도 해당하지 않으면 사용하는 기본 경로 (`0.0.0.0/0`)

---

## 라우팅 테이블이 만들어지는 방법

1. **정적 라우팅 (Static Routing)**

   * 관리자가 직접 경로를 수동으로 입력
   * 장점: 단순, 안정적 / 단점: 규모 크면 관리 어렵다

2. **동적 라우팅 (Dynamic Routing)**

   * 라우터들끼리 **라우팅 프로토콜**을 통해 자동으로 경로 학습 및 갱신
   * 장점: 자동화, 장애 시 우회 가능 / 단점: 오버헤드 발생

---

## 라우팅 프로토콜

### AS (Autonomous System)

* 자율 시스템 = 하나의 조직/ISP가 관리하는 네트워크 집합
* 라우팅 프로토콜은 **AS 내부용**과 **AS 외부용**으로 나뉨

---

### AS 내부 프로토콜 (IGP, Interior Gateway Protocol)

한 AS 내부에서 경로를 교환할 때 사용

* **RIP (Routing Information Protocol)**

  * **거리 벡터(distance vector)** 기반
  * 메트릭 = 홉 수(hop count)
  * 최대 15홉 제한 → 대규모 네트워크엔 부적합

* **OSPF (Open Shortest Path First)**

  * **링크 상태(link state)** 기반
  * 메트릭 = 대역폭 (cost)
  * 최단 경로를 Dijkstra 알고리즘으로 계산
  * 대규모 네트워크에 적합

---

### AS 외부 프로토콜 (EGP, Exterior Gateway Protocol)

서로 다른 AS 간 라우팅 정보를 교환할 때 사용

* **BGP (Border Gateway Protocol)**

  * 인터넷에서 사용되는 핵심 프로토콜
  * **경로 벡터(path vector)** 기반
  * 정책 기반 라우팅 지원 (단순 최단거리보다 비즈니스 정책 반영)
  * 인터넷 전체 라우팅 테이블을 유지 (수십만 개 경로)

---

✅ **정리**

* IP는 네트워크에서 기기를 식별하는 주소
* 공인 IP는 외부 식별, 사설 IP는 내부 식별
* NAT와 공유기는 IP 부족 문제 해결과 보안을 지원
* 라우팅은 최적 경로 선택, 라우팅 테이블의 엔트리가 그 길 정보
* 라우팅은 정적/동적 방식이 있으며, 동적 라우팅은 IGP(RIP, OSPF), EGP(BGP)로 나뉨

---
