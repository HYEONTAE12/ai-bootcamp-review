# 컴퓨터 구조 & 숫자·인코딩 총정리

> **목적** : 오늘 공부한 내용을 한눈에 볼 수 있도록, *개념 → 한 줄 뜻 → 비유/포인트* 순으로 정리했습니다. 마크다운 그대로 GitHub 레포에 업로드하면 README 💡

---

## 1. 숫자 표현

| 개념        | 한 줄 뜻             | 비유 / 기억 포인트                                      |
| --------- | ----------------- | ------------------------------------------------ |
| **이진수**   | 0·1 두 글자만으로 숫자 표현 | 전구 ON‑OFF, 11₁₀ → 1011₂                          |
| **16진수**  | 0‑9, A‑F 16개 기호   | 2진 4‑bit ↔ 16진 1자리 (1011₂ = B₁₆)                 |
| **2의 보수** | 음수를 0·1만으로        | +5→00000101 → 뒤집기 11111010 → +1 **11111011**(‑5) |

---

## 2. 문자 인코딩

| 코드                | 범위/바이트        | 특징                   | 비유              |
| ----------------- | ------------- | -------------------- | --------------- |
| **ASCII (7‑bit)** | 0‑127         | 영어·숫자·기호             | 128칸 미니 영어 서랍   |
| **Unicode**       | U+0000‑10FFFF | 전 세계 문자용 **코드포인트**   | 거대한 도서관 청구기호    |
| **UTF‑8**         | 1‑4 B 가변      | ASCII 100 % 호환, 웹 표준 | 작은 짐=1칸, 큰 짐=4칸 |
| **UTF‑16**        | 2·4 B 가변      | Windows / Java 내부    | 기본 2칸 가방        |
| **UTF‑32**        | 4 B 고정        | 변환 단순·메모리↑           | 책마다 두툼한 포장      |

> ex) ‘A’(U+0041) → **1 B** `0x41`; ‘가’(U+AC00) → **3 B**; 😊(U+1F60A) → **4 B**

---

## 3. 부동소수점 & 머신 ε

| 포인트           | 설명                                    |
| ------------- | ------------------------------------- |
| **무한 2진 소수**  | 0.1 → 0.0001100…(무한) → **근사 저장**      |
| **머신 이플실론 ε** | 1 근처 두 값이 구분되는 최소 간격 (≈ 2.22 × 10⁻¹⁶) |
| **비교 팁**      | `abs(a – b) < 1e‑12` 처럼 허용 오차 사용      |

```python
>>> 0.1 + 0.2
0.30000000000000004   # 근사 오차
```

---

## 4. CPU 큰 그림

| 부품                 | 한 줄 역할          | 비유                           |
| ------------------ | --------------- | ---------------------------- |
| **CPU**            | 연산·제어의 뇌        | 셰프의 머리                       |
| ├ 레지스터             | 초고속 메모장         | 손바닥 메모                       |
| ├ **PC**           | 다음 명령 주소        | 책갈피                          |
| ├ **IR**           | 방금 읽은 명령        | 현재 문장                        |
| ├ **MAR / MBR**    | 메모리 주소 / 데이터 버퍼 | 선반 번호 / 상자                   |
| ├ **GPR**          | 임시 주머니          | 재료 바구니                       |
| ├ **SP / BP**      | 스택 꼭대기 / 프레임    | 접시 탑 / 단락 시작                 |
| ├ **Flags**        | 결과 LED          | Zero, Sign, Carry, Overflow… |
| **캐시 → 메모리 → SSD** | 속도↓ 용량↑         | 작은 냉장고 → 큰 냉장고 → 지하창고        |
| **버스**             | 데이터·주소·제어 통로    | 주방 복도                        |

### 플래그 요약

* **S(Sign)** 음수인지, **Z(Zero)** 0인지, **C** 자리올림, **O** 부호 범위 초과, **I** 인터럽트 허용, **Supervisor** 모드.

---

## 5. 명령어 & 주소 지정

| 용어          | 뜻         | 비유         |
| ----------- | --------- | ---------- |
| **Operand** | 연산 대상(재료) | 요리 재료      |
| **Op‑code** | 연산 동사     | "굽기" "더하기" |
| **유효 주소**   | 실제 데이터 위치 | 편의점 좌표     |

### 주요 주소 지정 5 + α

| 방식          | 예시                   | 비유           |
| ----------- | -------------------- | ------------ |
| **즉시**      | `MOV R1, #5`         | 레시피에 ‘소금 2g’ |
| **직접**      | `MOV R1, [0x1000]`   | 지도에 번지수      |
| **간접**      | `MOV R1, [[0x2000]]` | 화분 속 열쇠 주소   |
| **레지스터**    | `ADD R1, R2`         | 손안 쪽지        |
| **레지스터 간접** | `MOV R1, [R2]`       | 손 쪽지 = 좌표    |
| **베이스+변위**  | `[RB+12]`            | 본관에서 12층 위   |
| **PC‑상대**   | `JMP +8`             | 내 위치서 8칸 앞으로 |

---

## 6. 인터럽트 처리 (6‑Step)

1. I/O 장치가 **IRQ** ‘띵동’
2. 현재 명령 **마무리**
3. 플래그 `IF` 확인
4. **컨텍스트 PUSH** (PC·레지스터)
5. **ISR** 주소로 점프 (인터럽트 벡터 참조)
6. 작업 끝 → **POP** 후 원래 코드 복귀

---

## 7. 파이프라인 & Hazard

### 5‑Stage 예시

`Fetch → Decode → Execute → Memory → Writeback`

| Hazard  | 언제?              | 해결                |
| ------- | ---------------- | ----------------- |
| **데이터** | 뒤 명령이 앞 결과 바로 필요 | Forwarding / 버블   |
| **제어**  | 분기 PC 변경         | Branch Prediction |
| **구조**  | HW 자원 충돌         | 유닛 복제 / 스톨        |

#### 발전형

* **슈퍼스칼라** : 파이프라인 여러 줄 (한 클럭 ≥2 명령)
* **Out‑of‑Order** : 의존 없는 명령 순서 재배치
* **Speculative Exec.** : 예측이 맞을 거라 가정하고 미리 실행

---

## 8. CISC vs RISC

| 항목    | **CISC (x86)**       | **RISC (ARM, RISC‑V)** |
| ----- | -------------------- | ---------------------- |
| 명령어   | 길이·기능 가변, 메모리‑to‑메모리 | 32‑bit 고정, Load/Store  |
| 목표    | 코드 짧게 (메모리 절약)       | 파이프라인 효율, 단순 HW        |
| 파이프라인 | 복잡 디코더 → 깊음          | 얕고 넓어 슈퍼스칼라·OoO 유리     |

---

## 9. 멀티코어 & 프로세서 용어

| 용어         | 의미                     | 비유              |
| ---------- | ---------------------- | --------------- |
| **클럭**     | 초당 박자 (3 GHz = 30억 박자) | 메트로놈            |
| **코어**     | 계산 엔진 하나               | 셰프 1명           |
| **멀티코어**   | 한 칩에 여러 코어             | 한 주방 여러 셰프      |
| **멀티프로세서** | CPU 칩 자체 여러 개          | 주방 자체 여러 개      |
| **SMT/HT** | 논리 프로세서 두 가닥           | 한 셰프가 두 레시피 번갈아 |

---

## 10. 쉬운 부동소수점 Tip

```python
# 안전 비교 패턴
def is_close(a, b, eps=1e-12):
    return abs(a-b) < eps
```

머신 ε보다 작은 차이는 ‘0’으로, ε는 ‘눈금 한 칸’, 그 이상은 근사 오차로 변함.

---

❗ **참고 / 추천 실습**

* 파이썬 `decimal` 모듈로 IEEE‑754 오차 체험
* 온라인 파이프라인 시뮬레이터로 Hazard 발생·해결 시각화
* `objdump -d`, `clang -S -emit-llvm` 으로 어셈블리·IR 구경하기

>  문서 마지막 업데이트 : 2025‑08‑08
