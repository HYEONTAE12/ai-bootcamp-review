---

# 🌐 네트워크 계층 및 관련 개념 정리

## 네트워크 계층

* **라우터 (Router)**
  서로 다른 네트워크를 연결하는 장치. IP 주소를 기반으로 \*\*최적의 경로(Route)\*\*를 찾아 패킷을 전달한다.

* **라우팅 (Routing)**
  라우터가 패킷을 전달하기 위해 경로를 결정하는 과정. 정적 라우팅(수동 설정)과 동적 라우팅(프로토콜 기반)이 있다.

---

## MAC 주소 (물리 주소)

* **정의**: 네트워크 인터페이스 카드(NIC)에 제조 시 부여되는 고유한 48비트(6바이트) 주소.
* **역할**: 동일 네트워크(LAN) 안에서 장치 식별.
* **구성**:

  * 제조사 번호(OUI, 상위 24비트)
  * 일련 번호(하위 24비트)

---

## IP 주소 (논리 주소)

* **정의**: 네트워크 상에서 장치를 구분하기 위한 주소. 이동하면 바뀔 수 있다.
* **주요 기능**:

  * **주소 지정(Addressing)**: 출발지/목적지를 지정
  * **단편화(Fragmentation)**: MTU보다 큰 패킷을 작은 조각으로 나눠 전송

---

## 단편화 & MTU

* **MTU (Maximum Transmission Unit)**: 한 번에 전송할 수 있는 최대 패킷 크기. (일반적으로 이더넷에서 1500바이트)
* **단편화(Fragmentation)**: 패킷이 MTU보다 클 경우 IP 계층에서 여러 개의 조각으로 나누어 전송하는 과정.

---

## IPv4

* **헤더 구성 요소**:

  * **송신자/수신자 주소**: 출발지, 목적지 IP 주소
  * **플래그 (Flag)**: 단편화 여부 표시 (예: More Fragment 비트)
  * **식별자 (Identifier)**: 동일한 패킷 단편을 식별하기 위한 값
  * **단편화 오프셋 (Fragment Offset)**: 원래 데이터에서 단편의 위치
  * **IPv4 주소 지정**: 32비트, 8비트씩 4개 옥텟(octet)으로 표현 (예: 192.168.0.1)
  * **TTL (Time To Live)**: 패킷의 생존 시간. 라우터를 지날 때마다 1씩 감소. 0이 되면 폐기.

---

## IPv6

* **정의**: IPv4의 주소 고갈 문제를 해결하기 위해 만든 128비트 주소 체계.
* **확장 헤더**: 필요할 때만 추가되는 확장 기능 (보안, 라우팅 등).
* **홉 제한 (Hop Limit)**: IPv4의 TTL과 같은 개념. 패킷의 생존 시간.

---

## ARP (Address Resolution Protocol)

* **정의**: IP 주소를 MAC 주소로 변환해주는 프로토콜. (반대 역할은 RARP)
* **실행 과정**:

  1. **요청(Request)**: “이 IP 가진 장치 누구냐?” → 브로드캐스트 전송
  2. **응답(Reply)**: 해당 장치가 자신의 MAC 주소를 응답
  3. **테이블 갱신**: ARP 캐시에 IP–MAC 매핑 저장
* **ARP 패킷**: 요청/응답 메시지를 담고 있음.

---

## IP의 한계

* **비신뢰성 (Unreliable)**: IP는 데이터의 손실 여부 확인, 재전송을 보장하지 않음.
* **비연결형 (Connectionless)**: 데이터를 보내기 전에 연결 설정을 하지 않음. (편지 보내는 개념)

---

## 전송 계층

* **TCP (Transmission Control Protocol)**
  연결 지향적, 신뢰성 보장, 순서 제어, 흐름/혼잡 제어. 웹/이메일/파일 전송에 사용.

---

## ICMP (Internet Control Message Protocol)

* **정의**: IP 계층에서 발생하는 오류나 제어 메시지를 전달하는 프로토콜.

* **주요 기능**:

  * **오류 보고** (예: 목적지 도달 불가)
  * **네트워크 진단 정보 제공**

* **활용 예시**:

  * **tracert**: 패킷이 거치는 라우터 경로 추적
  * **에코 요청/응답 (ping)**: 대상 장치의 연결 상태 확인
  * **라우터 광고 (Router Advertisement)**: IPv6 환경에서 라우터가 네트워크 정보를 알림

---

## 주소 체계

* **IP 주소**: 네트워크 상에서 장치를 구분하기 위한 논리 주소
* **네트워크 주소**: 네트워크 전체를 식별
* **호스트 주소**: 네트워크 내 개별 장치를 식별

---

## MAC 주소의 구성

* **제조사 번호 (OUI)**: 상위 24비트, 제조사 고유 코드
* **일련 번호**: 하위 24비트, 각 제조사에서 고유하게 부여

---

## 클래스풀 주소 체계

* **정의**: IP 주소를 클래스 A, B, C, D, E로 나누어 관리하는 방식.
* **문제점**: 주소 낭비 심각 (큰 네트워크에 할당된 주소를 효율적으로 못 씀).

---

## 클래스리스 주소 체계 (CIDR, Classless Inter-Domain Routing)

* **정의**: 클래스 구분 없이, 네트워크와 호스트 부분을 비트 단위로 나누어 할당.
* **서브넷 마스크 (Subnet Mask)**: IP 주소에서 네트워크/호스트 부분을 구분하는 데 사용.
* **CIDR 표기법**: `192.168.0.1/24` → 앞의 24비트는 네트워크, 나머지 8비트는 호스트

---
